---
title: "CS-321 Lab 5: Polygons"
---

<p>This is a 1-week lab.</p>

<h2>Overview</h2>

<p>It is now time to add more complicated shapes to our program. Specifically, we
will be adding polygons because they have the interesting feature that their
size (i.e., number of vertices) is variable.</p>

<p>There are other shapes besides polygons, however, that have a variable number of vertexes,
and it wouldn't be good to reinvent the wheel (e.g., file reading and writing code) for each
one. Therefore, a `varshape' abstract base class (ABC) has been written to encapsulate common elements
of polygons, polylines, B&eacute;zier curves, etc. varshape is derived from shape so that
it shares the common interface (has a color and type, has concrete classes that implement Clone and Draw, etc.)</p>

<p align="center"><img src="lab5uml.png" width="782" height="577" alt="[UML Static Structure Diagram: shape, point, line, varshape, Polygon]" /></p>

<p>You will derive your polygon class from varshape. You will need to implement constructors, the destructor,
and operator=. You should only need to override Draw and Clone. You may modify the varshape class
if needed (for example, if you are using something besides a char for type), but make sure that it
remains viable as a base class for other shapes that are defined by a variable number of vertexes.</p>

<ul>
<li><a href="varshape.h">varshape.h</a></li>
<li><a href="varshape.cpp">varshape.cpp</a></li>
</ul>

<h3>Activities</h3>

<p>Without removing any prior functionality from your shell, do the following.  Some of these
items may have already been completed for previous labs.</p>

<ul>

<li>Override the Erase function from Shell so that the user may erase the image
by pressing the Erase button.</li>

<li>Add a Polygon button to your shell and develop a mechanism for specifying polygons using 
the mouse. It is recommended that you keep the points specified by the user in a container
and only new a polygon and Add it to your image when the user indicates that the polygon is
finished by double-clicking.</li>

<li>You <b>MUST</b> have a polygon class. It is <b>NOT</b> acceptable to save
a polygon as a bunch of lines.</li>

<li>Note that QPainter has a <a href="http://doc.trolltech.com/qpainter.html#drawPolygon">drawPolygon()</a>
function. The required argument is a const reference to a QPointArray, which is the internal representation
used in the protected data member of varshape, so you will have access to it in polygon::Draw().

<li>Make certain that your code accounts for an unexpected order of events. For
example what happens when a user switches drawing mode while drawing a polygon,
a paint event occurs during a polygon specification, or the user executes
a text command?  There are a number of reasonable ways to handle these situations; make
sure that your program does something well defined and does not crash.</li>

<li>Don't forget to update your help information.</li>

<li>Make certain that your polygons can be read from and written to files.
This is mostly completed for you in the varshape::Read() and ::Write() functions.
You should not need to override these, although some small changes may be needed to your
program or to these functions in varshape to make them compatible.</li>

<li>It is <b>NOT REQUIRED</b> to implement adding a polygon from the command line.</li>
</ul>

<h2>Additional Details</h2>

<ul>
<li>The color features from the previous lab must work for polygons as well.
    This suggests that color (at least line color) is a property of all shapes.</li>
<li>Implement file reading and writing for all shape types. Files should include
    color information. Use any convenient format, making sure that your read
    function accepts files generated by your write function. Either a typed command or
    the File menu items may be used for accessing these features.</li>
<li><a href="http://doc.trolltech.com/3.0/qcolor.html">QColor</a> can return a
    single value that encompasses R, G, and B information. This may be convenient
    for storing colors in files.</li>
</ul>

<p>There are many areas for extra credit with this assignment, however
you must complete the basic requirements in order to receive extra
credit. Some possibilities include...
<ul>
<li>filling;</li>
<li>polylines;</li>
<li>showing a polygon in progress;</li>
<li>having an elastic edge as the mouse is moved for a polygon in progress;</li>
<li>filling a polygon in progress;</li>
<li>...</li>
</ul></p>
<p>Consult with your professor in advance of adding extra-credit elements to your program.</p>


<h2>Demonstration (during week 7 lab)</h2>

<p>You will need to demonstrate your project to the instructor during the
week 7 lab meeting. The demonstration will count for 25% of your
project grade.</p>

<h2>Lab report (due 4 P.M., the day before the week 7 lab)</h2>

<p>Your lab report need not be self-contained. This means that it is 
<strong>not</strong> necessary to restate the entire specification in your report.</p>

<ul>
  <li>Prepare your report in the XML format described in the
      Electronic Submission
      Guidelines.</li>
  <li>Include...
  <ul>
      <li>a brief overview of the assignment;</li>
      <li>details of any problems you encountered;</li>
      <li>suggestions for how the lab could be improved;</li>
      <li>things you could not figure out how to do;</li>
      <li>a list of extra features that you implemented, if any;</li>
      <li>a tally of the number of Non-commented new Lines Of Code (NLOC) written
          for this lab assignment.  Follow the requirements for this item
          from <a href="lab2.html">lab 2</a>.</li>
      <li>A summary of your activity log indicating how much time you spent
          on the assignment.  Follow the requirements for this item
          from <a href="lab2.html">lab 2</a>.</li>
      <li>Documented source code&#8212;See
          <a href="lab2.html">lab 2</a> for information on gensrc, which
          helps format your code for your XML report.
          <ul>
            <li>If a file has not changed since the last assignment, note this in your
                report and do not include the unchanged file.</li>
          </ul>
      </li>
  </ul>
  </li>
  <li>Follow the report submission requirements.</li>
  <li>Email this file to the instructor (<a
      href="mailto:durant@msoe.edu">durant@msoe.edu</a>) with a subject and message
      body indicating that this is your CS-321 Lab 5 submission.</li>

</ul>

<p>If you have any questions, consult the instructor.</p>

<h2>Course Objectives Addressed</h2>
<ul>
         
        <li>understand the design of graphical user interfaces.</li>
	<li>understand and be able to apply concepts of object-oriented programming, inheritance, polymorphism, and event-driven systems.</li>
	<li>be able to use reference materials to gain knowledge of an unfamiliar software library</li>
        <li>be able to implement multi-module software systems incorporating components developed by others.</li>
        <li>be able to clarify and document software requirements when specifications are initially incomplete or ambiguous.</li>
	<li>understand the need for extensive internal software documentation, and be able to provide it.</li>
</ul>
